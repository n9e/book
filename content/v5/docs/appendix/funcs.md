---
title: "告警函数"
linkTitle: "告警函数"
date: 2021-05-30
description: >
  告警策略的配置，对于Nightingale模式，支持多种内置函数，这些内置函数是作用在统计周期内的各个监控数据上，即统计周期+监控数据+告警函数得到一个值，这个值与阈值做比对判断是否触发告警，本章节对各类告警函数做详细解释说明
---



| 函数 | 含义 |
| :--- | :--- |
| 连续发生(all) | 最近 n 秒内的每个值都触发阈值 |
| 发生次数(happen) | 最近 n 秒内，有 m 次触发阈值 |
| 求和(sum) | 最近 n 秒内所有的点之和触发阈值 |
| 平均值(avg) | 最近 n 秒内所有的点的平均值触发阈值 |
| 最小值(min) | 最近 n 秒内所有的点的最小值触发阈值 |
| 最大值(max) | 最近 n 秒内所有的点的最大值触发阈值 |
| 突增突降率(pdiff) **区分正负** | 最近 n 秒的变化率, 有一个触发阈值则告警，举例：最近3个周期的值分别为 v1, v2, v3（v1为最新值）那么计算公式为 any( (v1-v2)/v2, (v1-v3)/v3 ) |
| 突增突降值(diff) **区分正负** | 最近 n 秒的变化量, 有一个触发阈值则告警，举例：最近3个周期的值分别为 v1, v2, v3（v1为最新值）那么计算公式为 any( (v1-v2), (v1-v3) ) |
| 同比变化值(c_avg) **区分正负** | 最近 n 秒的几个值取平均，相比1天或7天前同时段值的变化值，举例：最近n个值是 v1，v2，v3，过去同时段的值是 v1'，v2'，v3'，那么计算公式为 avg(v1,v2,v3)-avg(v1',v2',v3') |
| 同比变化值的绝对值(c_avg_abs) | 最近 n 秒的几个值取平均，相比1天或7天前同时段值的变化值，举例：最近n个值是 v1，v2，v3，过去同时段的值是 v1'，v2'，v3'，那么计算公式为 abs(avg(v1,v2,v3)-avg(v1',v2',v3')) |
| 同比变化率(c_avg_rate) **区分正负** | 最近 n 秒的几个值取平均，相比1天或7天前同时段值的变化率，举例：最近n个值是 v1，v2，v3，过去同时段的值是 v1'，v2'，v3'，那么计算公式为 (avg(v1,v2,v3)-avg(v1',v2',v3'))/avg(v1',v2',v3')*100 |
| 同比变化率的绝对值(c_avg_rate_abs) | 最近 n 秒的几个值取平均，相比1天或7天前同时段值的变化率的绝对值，举例：最近n个值是 v1，v2，v3，过去同时段的值是 v1'，v2'，v3'，那么计算公式为 abs((avg(v1,v2,v3)-avg(v1',v2',v3'))/avg(v1',v2',v3'))*100 |
| 3-sigma离群点检测 | 持续 n 秒内波动值过大，超过了 m 个标准差范围，默认 m 为 3 |