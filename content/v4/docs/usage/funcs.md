---
title: "告警函数"
linkTitle: "告警函数"
date: 2020-02-27
description: >
  对各类告警函数给予说明
---



| 类别 | 函数 | 含义 | 函数文案 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| 发生次数 | all, n | 最近n 秒 内，全发生 | 连续发生(all) | <br /> |
| 发生次数 | happen, n, m | 最近 n 秒 内，发生m次 | 出现(happen) | null点也计算在n内 |
| <br /> |  |  |  |  |
| 数学统计 | sum, n | 最近 n 秒 取值 的 和 | 求和(sum) |  |
| 数学统计 | avg, n | 最近 n 秒 取值 的 平均值 | 平均值(avg) |  |
| 数学统计 | min, n | 最近 n 秒 取值 的 最小值 | 最小值(min) |  |
| 数学统计 | max, n | 最近 n 秒 取值 的 最大值 | 最大值(max) |  |
| <br /> |  |  |  |  |
| 变化率 | pdiff, n | 最近 n 秒 变化率, 有一个满足 则触发<br />假设, 最近3个周期的值分别为 v, v2, v3（v为最新值）<br />那么计算公式为 any( (v-v2)/v2, (v-v3)/v3 )<br />**区分正负** | 突增突降率(pdiff) | <br /> |
| 变化量 | diff, n | 最近 n 秒 的变化量, 有一个满足 则触发<br />假设, 最近3个周期的值分别为 v, v2, v3（v为最新值）<br />那么计算公式为 any( (v-v2), (v-v3) )<br />**区分正负** | 突增突降值(diff) | <br /> |
| <br /> |  |  |  |  |
| 数据中断 | nodata, t | 最近 $t 秒内 无数据上报 | 数据上报中断(nodata) | <br /> |
| <br /> |  |  |  |  |
| 同环比 | c_avg_rate_abs, n | 最近 n 秒 的取值，相比 1天或7天前取值 的变化率 的绝对值<br />假设最近的n个值为 v1, v2, v3<br />历史取到的对应n'个值为 v1', v2'<br />那么计算公式为<br />abs(<br />(<br />avg(v1,v2,v3) / avg(v1',v2') -1<br />)<br />* 100%<br />) | 同比变化率(c_avg_rate_abs) | <br /> |
| 同环比 | c_avg_rate, n | 最近 n 秒 的取值，相比 1天或7天前取值 的变化率（**区分正负**)<br />假设最近的n个值为 v1, v2, v3<br />历史取到的对应n'个值为 v1', v2'<br />那么计算公式为<br />(<br />avg(v1,v2,v3) / avg(v1',v2') -1<br />)<br />* 100% | 同比变化率(c_avg_rate) | <br /> |
| 数据波动 | 3-sigma离群点检测，m | 持续 n 秒内波动值过大，超过了 m 个标准差范围，默认 m 为 3 |  |  |